# Zerg_pad 

## Важно 
После скачивания проекта с GitHub рекомендую нажать кнопку "Build", чтобы подключились все библиотеки в Android Studio.

Проект должен работать на Android 9–15, проверял только на Android 10 и 14.
В гифке показано, как переключать управление для левшей и правшей - это также удобно для проектов с простыми направлениями: вперед, назад, влево, вправо.

<img src="images/demo.gif" width="400"/>

## Обзор
**Zerg Pad** — универсальный Bluetooth-контроллер с элементами управления для собственных проектов на Arduino, STM32, ESP32 и т.п.
* Виртуальный джойстик с отображением угла, мощности и направления перемещения
* (<img src="images/triangle.png" width="20"/>, <img src="images/square.png" width="20"/>, <img src="images/circle.png" width="20"/>, <img src="images/cross.png" width="20"/>), Left, Right, Select и Start - Кнопки управления для собственных функций
* Область отображения журнала событий для мониторинга отправляемых команд

### Джойстик
Джойстик передает данные о своем положении в формате 4-байтовой команды:

| Назначение   | Кол-во байт | Формат (HEX) | Описание                                     |
|--------------|-------------|--------------|----------------------------------------------|
| Префикс      | 1 байт      | 0xF1         | Обозначает, что это команда от джойстика     |
| Координата X | 1 байт      | 0x00–0xFF    | Горизонтальное положение (0-255)             |
| Координата Y | 1 байт      | 0x00–0xFF    | Вертикальное положение (0-255)               |
| Мощность     | 1 байт      | 0x00–0x64    | Сила нажатия (0-100%)                        |

> **Важно:** Центральное положение: X=127 (0x7F), Y=127 (0x7F), Мощность=0 (0x00)

### Пример передачи данных джойстика
Любое движение джойстика отправляет команду в формате: `F1 XX YY PP`

| Действие      | Отправляемые байты | Описание                                  |
|---------------|--------------------|-------------------------------------------|
| Центр (покой) | `F1 7F 7F 00`      | Джойстик в нейтральном положении          |
| Макс. вверх   | `F1 7F 00 64`      | Максимальное отклонение вверх       |
| Макс. вниз    | `F1 7F FF 64`      | Максимальное отклонение вниз        |
| Макс. влево   | `F1 00 7F 64`      | Максимальное отклонение влево       |
| Макс. вправо  | `F1 FF 7F 64`      | Максимальное отклонение вправо      |

<img src="images/joystick_diagram.svg" width="400" alt="Диаграмма джойстика"/>

### Кнопки управления
Нажатие любой кнопки отправляет 3-байтную команду:
| Назначение   | Кол-во байт | Формат (HEX) | Описание                                     |
|--------------|-------------|--------------|----------------------------------------------|
| Префикс      | 1 байт      | 0xF0         | Обозначает, что это команда от кнопки       |
| Код кнопки   | 1 байт      | 0x01–0x08    | Уникальный код каждой кнопки                |
| Состояние    | 1 байт      | 0x7F/0x00    | 0x7F=нажата, 0x00=отпущена                 |

Например: 
- Нажатие кнопки <img src="images/circle.png" width="20"/>: `F0 01 7F` 
- Отпускание кнопки <img src="images/circle.png" width="20"/>: `F0 01 00`

| Кнопка | ID в коде | Код кнопки |
|--------|-----------|------------|
| <img src="images/circle.png" width="20"/> | btn_a | 0x01 |
| <img src="images/triangle.png" width="20"/> | btn_b | 0x02 |
| <img src="images/cross.png" width="20"/> | btn_x | 0x03 |
| <img src="images/square.png" width="20"/> | btn_y | 0x04 |
| Select | btn_select | 0x05 |
| Start | btn_start | 0x06 |
| Left | btn_left | 0x07 |
| Right | btn_right | 0x08 |

### Используемая библиотека
В проекте используется модифицированная версия библиотеки [JoystickView](https://github.com/alvesoaj/JoystickView) для реализации виртуального джойстика.

## Совместимость
Zerg Pad может использоваться в проектах с:
- Arduino (через SoftwareSerial / Bluetooth HC-05)
- ESP32 (Serial Bluetooth Classic)
- STM32 (через UART Bluetooth HC-05)
- ПК с Bluetooth (через виртуальный COM-порт)

### Скачать APK
Последнюю версию приложения можно скачать:

1. **Прямая ссылка** (правой кнопкой мыши → "Сохранить ссылку как"):  
   [Zerg_pad.apk](https://github.com/zagotovka/Zerg_pad/raw/main/download_app/Zerg_pad.apk)

2. Или через страницу релизов (ЕЩЕ НЕ РЕАЛИЗОВАНО!):  
   [Releases page](https://github.com/zagotovka/Zerg_pad/releases/latest)

> При скачивании через браузер мобильного устройства выберите "Сохранить файл" в диалоговом окне.
